(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{30:function(e,t,r){e.exports=r.p+"static/media/feather-sprite.0ed672ce.svg"},33:function(e,t,r){e.exports=r(66)},43:function(e,t,r){},66:function(e,t,r){"use strict";r.r(t);var a={};r.r(a),r.d(a,"beers",function(){return E});var n=r(0),c=r.n(n),i=r(25),o=r.n(i),s=r(10),d=r(7),u=r(28),l=r(31),m=r(13),f=r(12),b="FETCH_BEERS_SUCCESS",v="ADD_TO_FAVORITES",p="REMOVE_FROM_FAVORITES",h="LOAD_FAVORITED_BEERS",g={beersArray:[],beersById:{},favoritedBeerIds:[]};function E(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case b:return Object(f.a)({},e,{beersArray:t.beersArray,beersById:t.beersById});case h:return Object(f.a)({},e,{favoritedBeerIds:e.favoritedBeerIds.concat(t.favoritedBeerIds)});case v:return Object(f.a)({},e,{favoritedBeerIds:e.favoritedBeerIds.concat(t.beerId)});case p:return Object(f.a)({},e,{favoritedBeerIds:e.favoritedBeerIds.filter(function(e){return e!==t.beerId})});default:return e}}r(43);var O=r(4),y=r(5),B=r(9),_=r(6),j=r(8),I=r(32),k=r(3),w=r(11),F=r.n(w),C=r(14),N=r(29),x=r.n(N),S=function(){var e=x.a.create({method:"get",baseURL:"https://api.punkapi.com/v2"});return{getAllBeers:function(){var t=Object(C.a)(F.a.mark(function t(){var r,a;return F.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.get("/beers");case 2:return r=t.sent,a=r.data,t.abrupt("return",a.map(function(e){return{name:e.name,id:e.id,tagline:e.tagline,description:e.description,imageURL:e.image_url,ingredients:e.ingredients,foodPairing:e.food_pairing,abv:e.abv}}));case 5:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()}}(),A={getCachedFavoritedBeers:function(){try{var e=localStorage.getItem("FAVORITED_BEERS");return console.log({serializedFavorited:e}),e&&"undefined"!==e?JSON.parse(e):[]}catch(t){console.error(t)}},saveFavoritedBeers:function(e){try{var t=JSON.stringify(e.favoritedBeerIds);console.log("save",{serializedFavorited:t}),localStorage.setItem("FAVORITED_BEERS",t)}catch(r){console.error(r)}}},R=function(e){return{type:b,beersById:e.reduce(function(e,t){return e["".concat(t.id)]={name:t.name,id:t.id,tagline:t.tagline,description:t.description,imageURL:t.imageURL,ingredients:t.ingredients,foodPairing:t.foodPairing,abv:t.abv},e},{}),beersArray:e}},L=function(){return function(e){try{e(function(e){return{type:h,favoritedBeerIds:e}}(A.getCachedFavoritedBeers()))}catch(t){console.error(t)}}},T=r(30),D=r.n(T);var H=function(e){return c.a.createElement("svg",{className:"feather feather-".concat(e.name," ").concat(e.addClass||"").trim(),xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",viewBox:"0 0 24 24",width:"24",height:"24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},c.a.createElement("use",{xlinkHref:"".concat(D.a,"#").concat(e.name)}))};function U(e){return c.a.createElement("div",{className:"card"},c.a.createElement("div",{className:"card__header"},c.a.createElement("input",{type:"checkbox",id:"item-".concat(e.beer.id),className:"card__input-favorite",name:"favorites",defaultChecked:e.beer.isFavorite}),c.a.createElement("label",{htmlFor:"item-".concat(e.beer.id),className:"card__label-favorite",onClick:function(){return e.onHeartClick("".concat(e.beer.id))}},c.a.createElement(H,{name:"heart"}))),c.a.createElement("div",{className:"card__body"},c.a.createElement("div",{className:"card__img-wrapper"},c.a.createElement("img",{className:"card__img",src:e.beer.imageURL,alt:e.name}))),c.a.createElement("div",{className:"card__footer"},c.a.createElement("h4",{className:"card__title"},e.beer.name),c.a.createElement("p",{className:"card__tagline"},e.beer.tagline)))}function V(e){var t=e.beers.map(function(t){return c.a.createElement(U,{key:t.id,beer:t,onHeartClick:function(t){return e.onHeartClick(t)}})}),r=e.beers.length%2===0;return c.a.createElement("div",{className:"card-grid ".concat(r?"has-even-cards":"has-odd-cards")},t)}var P=function(e){function t(e){var r;return Object(O.a)(this,t),(r=Object(B.a)(this,Object(_.a)(t).call(this,e))).toggleFavorite=r.toggleFavorite.bind(Object(k.a)(Object(k.a)(r))),r}return Object(j.a)(t,e),Object(y.a)(t,[{key:"componentDidMount",value:function(){this.props.fetchBeers(),this.props.getCachedFavoritedBeers()}},{key:"toggleFavorite",value:function(e){-1===this.props.favoritedBeerIds.indexOf(e)?this.props.addToFavorites(e):this.props.removeFromFavorites(e)}},{key:"render",value:function(){var e=this;return console.log(this.props.favoritedBeerIds),c.a.createElement(V,{beers:this.props.ratedBeers,onHeartClick:function(t){return e.toggleFavorite(t)}})}}]),t}(n.Component),J=Object(d.b)(function(e){var t=function(e){return[e.beers.beersArray,e.beers.beersById,Object.keys(e.beers.beersById)]}(e),r=Object(I.a)(t,3);return{beersArray:r[0],beersById:r[1],beerIdsArray:r[2],ratedBeers:function(e){var t=e.beers.beersArray,r=e.beers.favoritedBeerIds;return t.map(function(e){return Object(f.a)({},e,{isFavorite:-1!==r.indexOf("".concat(e.id))})})}(e),favoritedBeerIds:function(e){return e.beers.favoritedBeerIds}(e),favoritedBeersById:function(e){var t=e.beers.beersById,r=e.beers.favoritedBeerIds.map(function(e){return Object(m.a)({},e,t[e])});return Object.assign.apply(Object,[{}].concat(Object(l.a)(r)))}(e)}},function(e){return{fetchBeers:function(){return e(function(){var e=Object(C.a)(F.a.mark(function e(t){var r;return F.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,S.getAllBeers();case 3:r=e.sent,t(R(r)),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error(e.t0);case 10:case"end":return e.stop()}},e,this,[[0,7]])}));return function(t){return e.apply(this,arguments)}}())},addToFavorites:function(t){return e(function(e){return{type:v,beerId:e}}(t))},removeFromFavorites:function(t){return e(function(e){return{type:p,beerId:e}}(t))},getCachedFavoritedBeers:function(){return e(L())}}})(P),M=function(e){function t(e){var r;return Object(O.a)(this,t),(r=Object(B.a)(this,Object(_.a)(t).call(this,e))).state={isExpanded:!1},r.handleClick=r.handleClick.bind(Object(k.a)(Object(k.a)(r))),r.handleSubmit=r.handleSubmit.bind(Object(k.a)(Object(k.a)(r))),r}return Object(j.a)(t,e),Object(y.a)(t,[{key:"handleClick",value:function(e){e.stopPropagation();var t=document.querySelector(".search-form__input");e.target.classList.contains("search-form__input")||""!==t.value||this.setState(function(e){return{isExpanded:!e.isExpanded}})}},{key:"handleSubmit",value:function(e){e.preventDefault()}},{key:"render",value:function(){var e=this;return c.a.createElement("div",{onClick:function(t){return e.handleClick(t)},className:"search-bar".concat(this.state.isExpanded?" is-expanded":"")},c.a.createElement("form",{className:"search-form",onSubmit:function(t){return e.handleSubmit(t)}},c.a.createElement("input",{className:"search-form__input",type:"text"}),c.a.createElement("input",{className:"search-form__submit",type:"submit",value:""}),c.a.createElement("button",{type:"button",className:"btn search-form__btn"},c.a.createElement(H,{name:"search"}))))}}]),t}(n.Component);function W(e){return c.a.createElement("div",{className:"app"},c.a.createElement("header",{className:"app__header clearfix"},c.a.createElement("h1",{className:"app__title"},"Punk Beer App"),c.a.createElement(M,null)),c.a.createElement("main",{className:"app__main"},c.a.createElement(J,null)))}var z=function(e){function t(){return Object(O.a)(this,t),Object(B.a)(this,Object(_.a)(t).apply(this,arguments))}return Object(j.a)(t,e),Object(y.a)(t,[{key:"render",value:function(){return c.a.createElement(W,null)}}]),t}(n.Component);var q=Object(d.b)(function(e){return{}})(z);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var X=Object(s.d)(Object(s.c)(a),Object(s.a)(u.a));window.onbeforeunload=function(){var e=X.getState().beers;A.saveFavoritedBeers(e)},o.a.render(c.a.createElement(d.a,{store:X},c.a.createElement(q,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[33,2,1]]]);
//# sourceMappingURL=main.bfbdd05a.chunk.js.map